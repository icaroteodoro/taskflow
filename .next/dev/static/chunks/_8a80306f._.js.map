{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/icaroteodoro/Documents/projects/taskflow/lib/api.ts"],"sourcesContent":["import axios from 'axios';\n\nconst API_URL = process.env.NEXT_PUBLIC_API_URL || '/api';\n\nconst api = axios.create({\n  baseURL: API_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\napi.interceptors.request.use(\n  (config) => {\n    if (typeof window !== 'undefined') {\n      const token = localStorage.getItem('token');\n      if (token) {\n        config.headers.Authorization = `Bearer ${token}`;\n      }\n    }\n    return config;\n  },\n  (error) => Promise.reject(error)\n);\n\napi.interceptors.response.use(\n  (response) => response,\n  async (error) => {\n    const originalRequest = error.config;\n\n    // If error is 401 and we haven't already retried\n    if (error.response?.status === 401 && !originalRequest._retry && originalRequest.url !== '/auth/login') {\n      originalRequest._retry = true;\n\n      try {\n        const refreshToken = localStorage.getItem('refreshToken');\n        if (!refreshToken) {\n          throw new Error('No refresh token available');\n        }\n\n        const res = await axios.post(`${API_URL}/auth/refreshtoken`, { refreshToken });\n\n        if (res.data.accessToken) {\n          localStorage.setItem('token', res.data.accessToken);\n          api.defaults.headers.common['Authorization'] = `Bearer ${res.data.accessToken}`;\n          originalRequest.headers['Authorization'] = `Bearer ${res.data.accessToken}`;\n          return api(originalRequest);\n        }\n      } catch (refreshError) {\n        // If refresh fails, clear tokens and redirect to login\n        if (typeof window !== 'undefined') {\n          localStorage.removeItem('token');\n          localStorage.removeItem('refreshToken');\n          localStorage.removeItem('user');\n          window.location.href = '/login';\n        }\n        return Promise.reject(refreshError);\n      }\n    }\n\n    return Promise.reject(error);\n  }\n);\n\nexport default api;\n"],"names":[],"mappings":";;;;AAEgB;AAFhB;;AAEA,MAAM,UAAU,2KAAO,CAAC,GAAG,CAAC,mBAAmB,IAAI;AAEnD,MAAM,MAAM,mJAAK,CAAC,MAAM,CAAC;IACvB,SAAS;IACT,SAAS;QACP,gBAAgB;IAClB;AACF;AAEA,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAC1B,CAAC;IACC,wCAAmC;QACjC,MAAM,QAAQ,aAAa,OAAO,CAAC;QACnC,IAAI,OAAO;YACT,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;QAClD;IACF;IACA,OAAO;AACT,GACA,CAAC,QAAU,QAAQ,MAAM,CAAC;AAG5B,IAAI,YAAY,CAAC,QAAQ,CAAC,GAAG,CAC3B,CAAC,WAAa,UACd,OAAO;IACL,MAAM,kBAAkB,MAAM,MAAM;IAEpC,iDAAiD;IACjD,IAAI,MAAM,QAAQ,EAAE,WAAW,OAAO,CAAC,gBAAgB,MAAM,IAAI,gBAAgB,GAAG,KAAK,eAAe;QACtG,gBAAgB,MAAM,GAAG;QAEzB,IAAI;YACF,MAAM,eAAe,aAAa,OAAO,CAAC;YAC1C,IAAI,CAAC,cAAc;gBACjB,MAAM,IAAI,MAAM;YAClB;YAEA,MAAM,MAAM,MAAM,mJAAK,CAAC,IAAI,CAAC,GAAG,QAAQ,kBAAkB,CAAC,EAAE;gBAAE;YAAa;YAE5E,IAAI,IAAI,IAAI,CAAC,WAAW,EAAE;gBACxB,aAAa,OAAO,CAAC,SAAS,IAAI,IAAI,CAAC,WAAW;gBAClD,IAAI,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,IAAI,IAAI,CAAC,WAAW,EAAE;gBAC/E,gBAAgB,OAAO,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,IAAI,IAAI,CAAC,WAAW,EAAE;gBAC3E,OAAO,IAAI;YACb;QACF,EAAE,OAAO,cAAc;YACrB,uDAAuD;YACvD,wCAAmC;gBACjC,aAAa,UAAU,CAAC;gBACxB,aAAa,UAAU,CAAC;gBACxB,aAAa,UAAU,CAAC;gBACxB,OAAO,QAAQ,CAAC,IAAI,GAAG;YACzB;YACA,OAAO,QAAQ,MAAM,CAAC;QACxB;IACF;IAEA,OAAO,QAAQ,MAAM,CAAC;AACxB;uCAGa"}},
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":["file:///Users/icaroteodoro/Documents/projects/taskflow/contexts/AuthContext.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\nimport api from '@/lib/api';\nimport { useRouter } from 'next/navigation';\n\ninterface User {\n    id: string;\n    name: string;\n    email: string;\n}\n\ninterface AuthContextType {\n    user: User | null;\n    login: (data: any) => Promise<void>;\n    register: (name: string, email: string, password: string) => Promise<void>;\n    logout: () => void;\n    loading: boolean;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n    const [user, setUser] = useState<User | null>(null);\n    const [loading, setLoading] = useState(true);\n    const router = useRouter();\n\n    useEffect(() => {\n        // Check if user is logged in on mount\n        const storedUser = localStorage.getItem('user');\n        const token = localStorage.getItem('token');\n\n        if (storedUser && token) {\n            setUser(JSON.parse(storedUser));\n        }\n        setLoading(false);\n    }, []);\n\n    const login = async (credentials: any) => {\n        const res = await api.post('/auth/login', credentials);\n        const { token, refreshToken, id, name, email } = res.data;\n\n        // AuthResponse actually doesn't return refreshToken in the current implementation,\n        // wait, I need to check backend AuthService to see if I returned refreshToken inside AuthResponse.\n        // Yes, I need to make sure refreshToken is returned or simply store token.\n        localStorage.setItem('token', token);\n        if (res.data.refreshToken) {\n            localStorage.setItem('refreshToken', res.data.refreshToken);\n        }\n\n        const userData = { id, name, email };\n        localStorage.setItem('user', JSON.stringify(userData));\n        setUser(userData);\n        router.push('/');\n    };\n\n    const register = async (name: string, email: string, password: string) => {\n        // API throws an error if already in use. Doesn't return tokens because verification is needed.\n        await api.post('/auth/register', { name, email, password });\n    };\n\n    const logout = () => {\n        localStorage.removeItem('token');\n        localStorage.removeItem('refreshToken');\n        localStorage.removeItem('user');\n        setUser(null);\n        router.push('/login');\n    };\n\n    return (\n        <AuthContext.Provider value={{ user, login, register, logout, loading }}>\n            {children}\n        </AuthContext.Provider>\n    );\n}\n\nexport function useAuth() {\n    const context = useContext(AuthContext);\n    if (context === undefined) {\n        throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;;;AAJA;;;;AAoBA,MAAM,4BAAc,IAAA,8KAAa,EAA8B;AAExD,SAAS,aAAa,EAAE,QAAQ,EAA2B;;IAC9D,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAc;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,SAAS,IAAA,kJAAS;IAExB,IAAA,0KAAS;kCAAC;YACN,sCAAsC;YACtC,MAAM,aAAa,aAAa,OAAO,CAAC;YACxC,MAAM,QAAQ,aAAa,OAAO,CAAC;YAEnC,IAAI,cAAc,OAAO;gBACrB,QAAQ,KAAK,KAAK,CAAC;YACvB;YACA,WAAW;QACf;iCAAG,EAAE;IAEL,MAAM,QAAQ,OAAO;QACjB,MAAM,MAAM,MAAM,wHAAG,CAAC,IAAI,CAAC,eAAe;QAC1C,MAAM,EAAE,KAAK,EAAE,YAAY,EAAE,EAAE,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,IAAI,IAAI;QAEzD,mFAAmF;QACnF,mGAAmG;QACnG,2EAA2E;QAC3E,aAAa,OAAO,CAAC,SAAS;QAC9B,IAAI,IAAI,IAAI,CAAC,YAAY,EAAE;YACvB,aAAa,OAAO,CAAC,gBAAgB,IAAI,IAAI,CAAC,YAAY;QAC9D;QAEA,MAAM,WAAW;YAAE;YAAI;YAAM;QAAM;QACnC,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC;QAC5C,QAAQ;QACR,OAAO,IAAI,CAAC;IAChB;IAEA,MAAM,WAAW,OAAO,MAAc,OAAe;QACjD,+FAA+F;QAC/F,MAAM,wHAAG,CAAC,IAAI,CAAC,kBAAkB;YAAE;YAAM;YAAO;QAAS;IAC7D;IAEA,MAAM,SAAS;QACX,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,QAAQ;QACR,OAAO,IAAI,CAAC;IAChB;IAEA,qBACI,6LAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAO;YAAU;YAAQ;QAAQ;kBACjE;;;;;;AAGb;GApDgB;;QAGG,kJAAS;;;KAHZ;AAsDT,SAAS;;IACZ,MAAM,UAAU,IAAA,2KAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACvB,MAAM,IAAI,MAAM;IACpB;IACA,OAAO;AACX;IANgB"}},
    {"offset": {"line": 173, "column": 0}, "map": {"version":3,"sources":["file:///Users/icaroteodoro/Documents/projects/taskflow/components/Providers.tsx"],"sourcesContent":["'use client';\n\nimport { AuthProvider } from '@/contexts/AuthContext';\nimport { ReactNode } from 'react';\nimport { ThemeProvider } from 'next-themes';\n\nexport function Providers({ children }: { children: ReactNode }) {\n    return (\n        <ThemeProvider attribute=\"class\" defaultTheme=\"system\" enableSystem>\n            <AuthProvider>\n                {children}\n            </AuthProvider>\n        </ThemeProvider>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AAJA;;;;AAMO,SAAS,UAAU,EAAE,QAAQ,EAA2B;IAC3D,qBACI,6LAAC,oKAAa;QAAC,WAAU;QAAQ,cAAa;QAAS,YAAY;kBAC/D,cAAA,6LAAC,2IAAY;sBACR;;;;;;;;;;;AAIjB;KARgB"}}]
}